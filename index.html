<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Оракул</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .screen { display: none; width: 100%; height: 100%; text-align: center; position: relative; }
    #main-screen { display: flex; flex-direction: column; justify-content: center; align-items: center; }
    .grid { display: grid; grid-template-columns: repeat(2, 100px); grid-gap: 20px; }
    .grid img { width: 100px; height: 100px; cursor: pointer; }
    #logo { width: 150px; margin-bottom: 10px; }
    #name { width: 200px; margin-bottom: 10px; }
    #build { font-size: 14px; margin-bottom: 20px; }
    #cookie { width: 150px; cursor: pointer; }
    #cookie-open { width: 300px; display: none; }
    #prediction { display: none; font-size: 32px; margin: 20px; }
    #reload-btn { display: none; margin-top: 20px; padding: 10px 20px; font-size: 18px; }
    #back-btn { position: absolute; top: 20px; left: 20px; width: 50px; cursor: pointer; }
    #sphere { width: 200px; cursor: pointer; }
    #sphere-text { margin-top: 20px; font-size: 24px; display: none; }
    .tarot-row { display: flex; justify-content: center; margin: 20px 0; }
    .tarot-card { width: 100px; margin: 0 10px; cursor: pointer; }
    #tarot-text { font-size: 18px; margin: 20px; display: none; white-space: pre-line; max-height: 200px; overflow-y: auto; }
    .zodiac-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin: 20px; }
    .zodiac-grid img { width: 80px; height: 80px; cursor: pointer; }
    #zodiac-img { width: 150px; margin-top: 20px; }
    #zodiac-text { font-size: 18px; margin: 20px; max-height: 200px; overflow-y: auto; }
  </style>
</head>
<body>

  <!-- Главный экран -->
  <div id="main-screen" class="screen" style="display:flex;">
    <img id="logo" src="logo.png" alt="Logo">
    <img id="name" src="name.png" alt="Name">
    <div id="build">Build 12</div>
    <div class="grid">
      <img src="sphere.png" id="btn-sphere" alt="Sphere">
      <img src="cookie.png" id="btn-cookie" alt="Cookie">
      <img src="tarot.png" id="btn-tarot" alt="Tarot">
      <img src="zodiac.png" id="btn-zodiac" alt="Zodiac">
    </div>
  </div>

  <!-- Экран печенья -->
  <div id="cookie-screen" class="screen">
    <img id="back-btn" src="back.png" alt="Back">
    <img id="cookie" src="cookie.png" alt="Cookie">
    <img id="cookie-open" src="cookie_open.png" alt="Open Cookie">
    <p id="prediction"></p>
    <button id="reload-btn">Reload</button>
  </div>

  <!-- Экран сферы -->
  <div id="sphere-screen" class="screen">
    <img id="back-btn-sphere" src="back.png" alt="Back">
    <img id="sphere" src="sphere.png" alt="Sphere">
    <div id="sphere-text"></div>
  </div>

  <!-- Экран таро -->
  <div id="tarot-screen" class="screen">
    <img id="back-btn-tarot" src="back.png" alt="Back">
    <div class="tarot-row">
      <img class="tarot-card" data-card="open1.png" src="close.png" alt="Card 1">
      <img class="tarot-card" data-card="open2.png" src="close.png" alt="Card 2">
      <img class="tarot-card" data-card="open3.png" src="close.png" alt="Card 3">
    </div>
    <div id="tarot-text"></div>
  </div>

  <!-- Экран зодиака -->
  <div id="zodiac-screen" class="screen">
    <img id="back-btn-zodiac" src="back.png" alt="Back">
    <div class="zodiac-grid">
      <img src="Group (1).png" data-id="1">
      <img src="Group (2).png" data-id="2">
      <img src="Group (3).png" data-id="3">
      <img src="Group (4).png" data-id="4">
      <img src="Group (5).png" data-id="5">
      <img src="Group (6).png" data-id="6">
      <img src="Group (7).png" data-id="7">
      <img src="Group (8).png" data-id="8">
      <img src="Group (9).png" data-id="9">
      <img src="Group (10).png" data-id="10">
      <img src="Group (11).png" data-id="11">
      <img src="Group (12).png" data-id="12">
    </div>
  </div>

  <!-- Экран прогноза зодиака -->
  <div id="zodiac-detail-screen" class="screen">
    <img id="back-btn-zodiac-detail" src="back.png" alt="Back">
    <img id="zodiac-img" src="" alt="Zodiac">
    <div id="zodiac-text"></div>
  </div>

  <script>
    const mainScreen = document.getElementById("main-screen");
    const cookieScreen = document.getElementById("cookie-screen");
    const sphereScreen = document.getElementById("sphere-screen");
    const tarotScreen = document.getElementById("tarot-screen");
    const zodiacScreen = document.getElementById("zodiac-screen");
    const zodiacDetailScreen = document.getElementById("zodiac-detail-screen");

    // Кнопки перехода
    document.getElementById("btn-cookie").onclick = () => showScreen(cookieScreen);
    document.getElementById("btn-sphere").onclick = () => showScreen(sphereScreen);
    document.getElementById("btn-tarot").onclick = () => showScreen(tarotScreen);
    document.getElementById("btn-zodiac").onclick = () => showScreen(zodiacScreen);

    function showScreen(screen) {
      [mainScreen, cookieScreen, sphereScreen, tarotScreen, zodiacScreen, zodiacDetailScreen].forEach(s => s.style.display = "none");
      screen.style.display = "flex";
      screen.style.flexDirection = "column";
      screen.style.alignItems = "center";
      screen.style.justifyContent = "center";
    }

    // Печенье
    const cookie = document.getElementById("cookie");
    const cookieOpen = document.getElementById("cookie-open");
    const prediction = document.getElementById("prediction");
    const reloadBtn = document.getElementById("reload-btn");

    async function loadPrediction() {
      const res = await fetch("predictions.json");
      const data = await res.json();
      prediction.textContent = data[Math.floor(Math.random() * data.length)];
    }

    cookie.addEventListener("click", () => {
      cookie.style.display = "none";
      cookieOpen.style.display = "block";
      prediction.style.display = "block";
      reloadBtn.style.display = "block";
      loadPrediction();
    });

    reloadBtn.addEventListener("click", () => {
      cookie.style.display = "block";
      cookieOpen.style.display = "none";
      prediction.style.display = "none";
      reloadBtn.style.display = "none";
    });

    document.getElementById("back-btn").onclick = () => showScreen(mainScreen);

    // Сфера
    const sphere = document.getElementById("sphere");
    const sphereText = document.getElementById("sphere-text");

    async function loadSphereText() {
      const res = await fetch("sphere.json");
      const data = await res.json();
      sphereText.textContent = data[Math.floor(Math.random() * data.length)];
      sphereText.style.display = "block";
    }

    sphere.addEventListener("click", loadSphereText);

    window.addEventListener("devicemotion", (event) => {
      const acc = event.accelerationIncludingGravity;
      const total = Math.abs(acc.x) + Math.abs(acc.y) + Math.abs(acc.z);
      if (total > 30) loadSphereText();
    });

    document.getElementById("back-btn-sphere").onclick = () => showScreen(mainScreen);

    // Таро
    const tarotCards = document.querySelectorAll(".tarot-card");
    const tarotText = document.getElementById("tarot-text");
    let openedCards = 0;
    let tarotResults = [];

    async function loadTarot() {
      const res = await fetch("tarot.json");
      return await res.json();
    }

    loadTarot().then(data => {
      tarotCards.forEach((card, index) => {
        card.addEventListener("click", () => {
          if (card.src.includes("close.png")) {
            card.src = card.dataset.card;
            tarotResults.push(data[index]);
            openedCards++;
            if (openedCards === 3) {
              tarotText.textContent = tarotResults.join("\n\n");
              tarotText.style.display = "block";
            }
          }
        });
      });
    });

    document.getElementById("back-btn-tarot").onclick = () => {
      tarotCards.forEach(card => card.src = "close.png");
      openedCards = 0;
      tarotResults = [];
      tarotText.style.display = "none";
      showScreen(mainScreen);
    };

    // Зодиак
    const zodiacImgs = document.querySelectorAll("#zodiac-screen img[data-id]");
    const zodiacImg = document.getElementById("zodiac-img");
    const zodiacText = document.getElementById("zodiac-text");

    let zodiacData = {};

    async function loadZodiac() {
      const res = await fetch("zodiac.json");
      zodiacData = await res.json();
    }

    loadZodiac();

    zodiacImgs.forEach(img => {
      img.addEventListener("click", () => {
        zodiacImg.src = img.src;
        zodiacText.textContent = zodiacData[img.dataset.id] || "Нет прогноза";
        showScreen(zodiacDetailScreen);
      });
    });

    document.getElementById("back-btn-zodiac").onclick = () => showScreen(mainScreen);
    document.getElementById("back-btn-zodiac-detail").onclick = () => showScreen(zodiacScreen);
  </script>
</body>
</html>
